From 05e537073e76b7a1e6e9bcca8df6a91bdf4fb6cf Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Lu=C3=ADs=20Pereira?= <luis.artur.pereira@gmail.com>
Date: Thu, 1 Dec 2016 00:53:54 +0000
Subject: [PATCH 3/4] Use the new MenuCache configuration CMake module

Just adapt to it.
---
 CMakeLists.txt | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index ebe033c..ee9ce26 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -8,6 +8,8 @@ set(CMAKE_AUTOUIC ON)
 set(CMAKE_AUTOMOC ON)
 set(CMAKE_AUTORCC ON)
 
+set(REQUIRED_MENUCACHE_VERSION "0.3.3")
+
 include(CMakeDependentOption)
 include(GNUInstallDirs)
 
@@ -39,9 +41,7 @@ endif ()
 
 if (USE_MENU_CACHE)
     # optionally use libmenu-cache from lxde to generate the application menu
-    pkg_check_modules(MENU_CACHE REQUIRED QUIET
-        libmenu-cache>=0.3.3
-    )
+    find_package(MenuCache "${REQUIRED_MENUCACHE_VERSION}" REQUIRED)
 endif()
 
 if (RUNNER_MATH)
@@ -80,7 +80,7 @@ set(lxqt-runner_LIBRARIES
     lxqt
     lxqt-globalkeys
     lxqt-globalkeys-ui
-    ${MENU_CACHE_LIBRARIES}
+    ${MENUCACHE_LIBRARIES}
     ${QTX_LIBRARIES}
     ${MUPARSER_LDFLAGS}
 )
@@ -127,7 +127,7 @@ if (RUNNER_MATH)
 endif ()
 
 target_include_directories(${PROJECT_NAME}
-    PRIVATE "$<$<BOOL:${MENU_CACHE_FOUND}>:${MENU_CACHE_INCLUDE_DIRS}>"
+    PRIVATE "$<$<BOOL:${MENUCACHE_FOUND}>:${MENUCACHE_INCLUDE_DIRS}>"
     PRIVATE "$<$<BOOL:${MUPARSER_FOUND}>:${MUPARSER_INCLUDE_DIRS}>"
 )
 
@@ -135,7 +135,7 @@ target_compile_definitions(${PROJECT_NAME}
     PRIVATE "$<$<BOOL:${RUNNER_MATH}>:MATH_ENABLED>"
     PRIVATE "$<$<BOOL:${RUNNER_VBOX}>:VBOX_ENABLED>"
     PRIVATE "$<$<BOOL:${RUNNER_VBOX_HEADLESS}>:VBOX_HEADLESS_ENABLED>"
-    PRIVATE "$<$<BOOL:${MENU_CACHE_FOUND}>:HAVE_MENU_CACHE=1>"
+    PRIVATE "$<$<BOOL:${MENUCACHE_FOUND}>:HAVE_MENU_CACHE=1>"
 )
 
 target_link_libraries(${PROJECT_NAME}
-- 
2.8.3

